{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Components/KakaoLogIn.js\";\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport KakaoLogin from \"react-kakao-login\";\nimport { usersApi } from \"api\";\nimport { connect } from \"react-redux\";\nimport store, { logIn } from \"store\";\nconst Container = styled.div`\n  display: flex;\n  flex-flow: column wrap;\n`;\nconst KakaoBtn = styled(KakaoLogin)`\n  padding: 0;\n  width: 250px;\n  height: 40px;\n  line-height: 40px;\n  color: #783c00;\n  background-color: #ffeb00;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  font-size: 12px;\n  font-weight: bold;\n  text-align: center;\n  &:focus {\n    outline: none;\n  }\n`;\n\nclass KakaoLogIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.responseKakao = async res => {\n      try {\n        this.setState({\n          id: res.profile.id,\n          name: res.profile.properties.nickname,\n          email: res.profile.kakao_account.email,\n          provider: \"kakao\"\n        }, async () => {\n          const {\n            data: {\n              token\n            },\n            data: {\n              user_pk\n            }\n          } = await usersApi.kakaoLogin(this.state.name, this.state.email);\n          this.props.redux_saveLogInfo({\n            token,\n            user_pk,\n            logged: true\n          });\n        });\n      } catch {\n        this.setState({\n          error: \"Can't find user\"\n        });\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n\n      store.subscribe(() => {\n        sessionStorage.setItem(\"LogInInfo\", JSON.stringify(store.getState().user));\n        this.props.history.goBack();\n      });\n    };\n\n    this.responseFail = err => {\n      console.log(err);\n    };\n\n    this.state = {\n      id: \"\",\n      name: \"\",\n      email: \"\",\n      provider: \"\",\n      logged: false,\n      error: null,\n      loading: true\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(KakaoBtn, {\n      jsKey: \"652728f30d952eaeda20af5b98991887\",\n      buttonText: \"\\uCE74\\uCE74\\uC624\\uD1A1 \\uB85C\\uADF8\\uC778\",\n      onSuccess: this.responseKakao,\n      onFailure: this.responseFail,\n      getProfile: \"true\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }\n    }));\n  }\n\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    redux_saveLogInfo: data => dispatch(logIn(data))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(KakaoLogIn);","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Components/KakaoLogIn.js"],"names":["React","Component","styled","KakaoLogin","usersApi","connect","store","logIn","Container","div","KakaoBtn","KakaoLogIn","constructor","props","responseKakao","res","setState","id","profile","name","properties","nickname","email","kakao_account","provider","data","token","user_pk","kakaoLogin","state","redux_saveLogInfo","logged","error","loading","subscribe","sessionStorage","setItem","JSON","stringify","getState","user","history","goBack","responseFail","err","console","log","render","mapDispatchToProps","dispatch","ownProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport KakaoLogin from \"react-kakao-login\";\nimport { usersApi } from \"api\";\nimport { connect } from \"react-redux\";\nimport store, { logIn } from \"store\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-flow: column wrap;\n`;\n\nconst KakaoBtn = styled(KakaoLogin)`\n  padding: 0;\n  width: 250px;\n  height: 40px;\n  line-height: 40px;\n  color: #783c00;\n  background-color: #ffeb00;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  font-size: 12px;\n  font-weight: bold;\n  text-align: center;\n  &:focus {\n    outline: none;\n  }\n`;\n\nclass KakaoLogIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      name: \"\",\n      email: \"\",\n      provider: \"\",\n      logged: false,\n      error: null,\n      loading: true,\n    };\n  }\n\n  responseKakao = async (res) => {\n    try {\n      this.setState(\n        {\n          id: res.profile.id,\n          name: res.profile.properties.nickname,\n          email: res.profile.kakao_account.email,\n          provider: \"kakao\",\n        },\n        async () => {\n          const {\n            data: { token },\n            data: { user_pk },\n          } = await usersApi.kakaoLogin(this.state.name, this.state.email);\n          this.props.redux_saveLogInfo({ token, user_pk, logged: true });\n        }\n      );\n    } catch {\n      this.setState({\n        error: \"Can't find user\",\n      });\n    } finally {\n      this.setState({ loading: false });\n    }\n    store.subscribe(() => {\n      sessionStorage.setItem(\n        \"LogInInfo\",\n        JSON.stringify(store.getState().user)\n      );\n      this.props.history.goBack();\n    });\n  };\n\n  responseFail = (err) => {\n    console.log(err);\n  };\n\n  render() {\n    return (\n      <Container>\n        <KakaoBtn\n          jsKey=\"652728f30d952eaeda20af5b98991887\"\n          buttonText=\"카카오톡 로그인\"\n          onSuccess={this.responseKakao}\n          onFailure={this.responseFail}\n          getProfile=\"true\"\n        />\n      </Container>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    redux_saveLogInfo: (data) => dispatch(logIn(data)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(KakaoLogIn);\n"]},"metadata":{},"sourceType":"module"}