{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Search/SearchContainer3.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport SearchPresenter from './SearchPresenter';\nimport { searchApi } from 'api';\nimport Loader from 'Components/Loader';\nimport { searchTerm, pageNum, filterOption } from 'store'; // import store  from 'store';\n\nimport { connect } from 'react-redux';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst SearchContainer = ({\n  redux_getPageNum,\n  redux_getFilterOption,\n  redux_getSearchTerm\n}) => {\n  const location = useLocation();\n  const [searchData, setSearchData] = useState({\n    searchTerm: null,\n    page: null,\n    filter: null,\n    searchResults: [],\n    itemNum: null\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getItems = async (searchTerm, pageNum, filterOption) => {\n    var {\n      data: {\n        results: searchResults,\n        count: itemNum\n      }\n    } = await searchApi.search(searchTerm, pageNum, filterOption);\n    setSearchData({\n      searchTerm: searchTerm,\n      page: pageNum,\n      filter: filterOption,\n      searchResults: searchResults,\n      itemNum: itemNum\n    });\n  };\n\n  const getData = async (searchTerm, pageNum, filterOption) => {\n    try {\n      getItems(searchTerm, pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n    const searchTerm = qs.search;\n    const {\n      pathname: pagePath\n    } = location; // redux_getPageNum(pageNum);\n    // redux_getFilterOption(filterOption);\n    // redux_getSearchTerm(searchTerm);\n\n    if (isMount.current) {\n      // mount\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      return;\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [location]);\n  const {\n    searchTerm,\n    searchResults,\n    itemNum\n  } = searchData;\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(SearchPresenter, {\n    searchTerm: searchTerm,\n    searchResults: searchResults,\n    itemNum: itemNum,\n    error: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 5\n    }\n  });\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    redux_getPageNum: data => dispatch(pageNum(data)),\n    redux_getFilterOption: data => dispatch(filterOption(data)),\n    redux_getSearchTerm: data => dispatch(searchTerm(data))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(SearchContainer);","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Search/SearchContainer3.js"],"names":["React","useState","useEffect","useRef","useLocation","SearchPresenter","searchApi","Loader","searchTerm","pageNum","filterOption","connect","getQueryStringObject","SearchContainer","redux_getPageNum","redux_getFilterOption","redux_getSearchTerm","location","searchData","setSearchData","page","filter","searchResults","itemNum","error","setError","loading","setLoading","getItems","data","results","count","search","getData","isMount","qs","pathname","pagePath","current","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport SearchPresenter from './SearchPresenter';\nimport { searchApi } from 'api';\nimport Loader from 'Components/Loader';\nimport { searchTerm, pageNum, filterOption } from 'store';\n// import store  from 'store';\nimport { connect } from 'react-redux';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst SearchContainer = ({\n  redux_getPageNum,\n  redux_getFilterOption,\n  redux_getSearchTerm,\n}) => {\n  const location = useLocation();\n  const [searchData, setSearchData] = useState({\n    searchTerm: null,\n    page: null,\n    filter: null,\n    searchResults: [],\n    itemNum: null,\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getItems = async (searchTerm, pageNum, filterOption) => {\n    var {\n      data: { results: searchResults, count: itemNum },\n    } = await searchApi.search(searchTerm, pageNum, filterOption);\n    setSearchData({\n      searchTerm: searchTerm,\n      page: pageNum,\n      filter: filterOption,\n      searchResults: searchResults,\n      itemNum: itemNum,\n    });\n  };\n\n  const getData = async (searchTerm, pageNum, filterOption) => {\n    try {\n      getItems(searchTerm, pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n    const searchTerm = qs.search;\n    const { pathname: pagePath } = location;\n    // redux_getPageNum(pageNum);\n    // redux_getFilterOption(filterOption);\n    // redux_getSearchTerm(searchTerm);\n    if (isMount.current) {\n      // mount\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      return;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location]);\n\n  const { searchTerm, searchResults, itemNum } = searchData;\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <SearchPresenter\n      searchTerm={searchTerm}\n      searchResults={searchResults}\n      itemNum={itemNum}\n      error={error}\n    />\n  );\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    redux_getPageNum: (data) => dispatch(pageNum(data)),\n    redux_getFilterOption: (data) => dispatch(filterOption(data)),\n    redux_getSearchTerm: (data) => dispatch(searchTerm(data)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(SearchContainer);\n"]},"metadata":{},"sourceType":"module"}