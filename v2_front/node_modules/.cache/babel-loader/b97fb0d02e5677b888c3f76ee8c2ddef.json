{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Detail/DetailContainer.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DetailPresenter from './DetailPresenter';\nimport { productsApi, usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst DetailContainer = () => {\n  const [detailData, setDetailData] = useState({\n    detail: '',\n    checkFavs: '',\n    recent: [],\n    reviews: [],\n    qnas: []\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const {\n    id: productId\n  } = useParams();\n\n  const getProductData = async () => {\n    var _store$getState;\n\n    const {\n      data: detail\n    } = await productsApi.showDetail(productId);\n    const {\n      data: checkFavs\n    } = await usersApi.checkfavs(detail.id);\n    const {\n      data: {\n        results: reviews\n      }\n    } = await productsApi.reviews(productId);\n    const {\n      data: {\n        results: qnas\n      }\n    } = await productsApi.qnas(productId);\n    const recent = (_store$getState = store.getState()) === null || _store$getState === void 0 ? void 0 : _store$getState.products.map(i => i.product);\n    return [detail, checkFavs, reviews, qnas, recent];\n  };\n\n  const getData = async () => {\n    try {\n      const [detail, checkFavs, reviews, qnas, recent] = await getProductData();\n      console.log(detail, checkFavs); // if (store.getState()?.user.logged) {\n\n      setDetailData({\n        detail,\n        checkFavs,\n        recent,\n        reviews,\n        qnas\n      }); // } else {\n      //   setDetailData({\n      //     detail: detail,\n      //     checkFavs: checkFavs,\n      //     recent: recent,\n      //     reviews: reviews,\n      //     qnas: qnas,\n      //   });\n      // }\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productId]);\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(DetailPresenter, Object.assign({}, detailData, {\n    error: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }));\n};\n\nexport default DetailContainer;","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Detail/DetailContainer.js"],"names":["React","useState","useEffect","useParams","DetailPresenter","productsApi","usersApi","Loader","store","DetailContainer","detailData","setDetailData","detail","checkFavs","recent","reviews","qnas","error","setError","loading","setLoading","id","productId","getProductData","data","showDetail","checkfavs","results","getState","products","map","i","product","getData","console","log"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DetailPresenter from './DetailPresenter';\nimport { productsApi, usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst DetailContainer = () => {\n  const [detailData, setDetailData] = useState({\n    detail: '',\n    checkFavs: '',\n    recent: [],\n    reviews: [],\n    qnas: [],\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const { id: productId } = useParams();\n\n  const getProductData = async () => {\n    const { data: detail } = await productsApi.showDetail(productId);\n    const { data: checkFavs } = await usersApi.checkfavs(detail.id);\n    const {\n      data: { results: reviews },\n    } = await productsApi.reviews(productId);\n    const {\n      data: { results: qnas },\n    } = await productsApi.qnas(productId);\n    const recent = store.getState()?.products.map((i) => i.product);\n    return [detail, checkFavs, reviews, qnas, recent];\n  };\n\n  const getData = async () => {\n    try {\n      const [detail, checkFavs, reviews, qnas, recent] = await getProductData();\n      console.log(detail, checkFavs);\n      // if (store.getState()?.user.logged) {\n      setDetailData({\n        detail,\n        checkFavs,\n        recent,\n        reviews,\n        qnas,\n      });\n      // } else {\n      //   setDetailData({\n      //     detail: detail,\n      //     checkFavs: checkFavs,\n      //     recent: recent,\n      //     reviews: reviews,\n      //     qnas: qnas,\n      //   });\n      // }\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productId]);\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <DetailPresenter {...detailData} error={error} />\n  );\n};\n\nexport default DetailContainer;\n"]},"metadata":{},"sourceType":"module"}