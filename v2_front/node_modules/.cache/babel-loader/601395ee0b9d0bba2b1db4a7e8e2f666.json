{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Detail/DetailContainer3.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DetailPresenter from './DetailPresenter';\nimport { productsApi, usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst DetailContainer = () => {\n  const [detailData, setDetailData] = useState({\n    detail: '',\n    productImg: '',\n    favs: [],\n    baskets: [],\n    recent: [],\n    reviews: [],\n    qnas: []\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const {\n    id: productId\n  } = useParams();\n\n  const getProductData = async () => {\n    var _store$getState;\n\n    const {\n      data: {\n        product: detail,\n        detail_img: productImg\n      }\n    } = await productsApi.showDetail(productId);\n    const {\n      data: {\n        results: reviews\n      }\n    } = await productsApi.reviews(productId);\n    const {\n      data: {\n        results: qnas\n      }\n    } = await productsApi.qnas(productId);\n    const recent = (_store$getState = store.getState()) === null || _store$getState === void 0 ? void 0 : _store$getState.products.map(i => i.product);\n    return [detail, productImg, reviews, qnas, recent];\n  };\n\n  const getUserData = async () => {\n    const {\n      data: favsData\n    } = await usersApi.favs();\n    const {\n      data: basketData\n    } = await usersApi.basket();\n    const favs = favsData.map(item => item.product);\n    const baskets = basketData.map(item => item.product);\n    return [favs, baskets];\n  };\n\n  const getData = async () => {\n    try {\n      var _store$getState2;\n\n      const [detail, productImg, reviews, qnas, recent] = await getProductData();\n\n      if ((_store$getState2 = store.getState()) === null || _store$getState2 === void 0 ? void 0 : _store$getState2.user.logged) {\n        const [favs, baskets] = await getUserData();\n        setDetailData({\n          detail: detail,\n          productImg: productImg,\n          favs: favs,\n          baskets: baskets,\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas\n        });\n      } else {\n        setDetailData({\n          detail: detail,\n          productImg: productImg,\n          favs: [],\n          baskets: [],\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas\n        });\n      }\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productId]);\n  const {\n    detail,\n    productImg,\n    favs,\n    baskets,\n    recent,\n    reviews,\n    qnas\n  } = detailData;\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(DetailPresenter, {\n    detail: detail,\n    productImg: productImg,\n    favs: favs,\n    baskets: baskets,\n    recent: recent,\n    reviews: reviews,\n    qnas: qnas,\n    error: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default DetailContainer;","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Detail/DetailContainer3.js"],"names":["React","useState","useEffect","useParams","DetailPresenter","productsApi","usersApi","Loader","store","DetailContainer","detailData","setDetailData","detail","productImg","favs","baskets","recent","reviews","qnas","error","setError","loading","setLoading","id","productId","getProductData","data","product","detail_img","showDetail","results","getState","products","map","i","getUserData","favsData","basketData","basket","item","getData","user","logged"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DetailPresenter from './DetailPresenter';\nimport { productsApi, usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst DetailContainer = () => {\n  const [detailData, setDetailData] = useState({\n    detail: '',\n    productImg: '',\n    favs: [],\n    baskets: [],\n    recent: [],\n    reviews: [],\n    qnas: [],\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const { id: productId } = useParams();\n\n  const getProductData = async () => {\n    const {\n      data: { product: detail, detail_img: productImg },\n    } = await productsApi.showDetail(productId);\n    const {\n      data: { results: reviews },\n    } = await productsApi.reviews(productId);\n    const {\n      data: { results: qnas },\n    } = await productsApi.qnas(productId);\n    const recent = store.getState()?.products.map((i) => i.product);\n    return [detail, productImg, reviews, qnas, recent];\n  };\n\n  const getUserData = async () => {\n    const { data: favsData } = await usersApi.favs();\n    const { data: basketData } = await usersApi.basket();\n    const favs = favsData.map((item) => item.product);\n    const baskets = basketData.map((item) => item.product);\n    return [favs, baskets];\n  };\n\n  const getData = async () => {\n    try {\n      const [\n        detail,\n        productImg,\n        reviews,\n        qnas,\n        recent,\n      ] = await getProductData();\n\n      if (store.getState()?.user.logged) {\n        const [favs, baskets] = await getUserData();\n        setDetailData({\n          detail: detail,\n          productImg: productImg,\n          favs: favs,\n          baskets: baskets,\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas,\n        });\n      } else {\n        setDetailData({\n          detail: detail,\n          productImg: productImg,\n          favs: [],\n          baskets: [],\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas,\n        });\n      }\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productId]);\n\n  const {\n    detail,\n    productImg,\n    favs,\n    baskets,\n    recent,\n    reviews,\n    qnas,\n  } = detailData;\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <DetailPresenter\n      detail={detail}\n      productImg={productImg}\n      favs={favs}\n      baskets={baskets}\n      recent={recent}\n      reviews={reviews}\n      qnas={qnas}\n      error={error}\n    />\n  );\n};\n\nexport default DetailContainer;\n"]},"metadata":{},"sourceType":"module"}