{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Search/SearchContainer3.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport SearchPresenter from './SearchPresenter';\nimport { searchApi } from 'api';\nimport Loader from 'Components/Loader';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst SearchContainer = () => {\n  const location = useLocation();\n  const [searchData, setSearchData] = useState({\n    searchTerm: null,\n    page: null,\n    filter: null,\n    searchResults: [],\n    itemNum: null\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getItems = async (searchTerm, pageNum, filterOption) => {\n    var {\n      data: {\n        results: searchResults,\n        count: itemNum\n      }\n    } = await searchApi.search(searchTerm, pageNum, filterOption);\n    setSearchData({\n      searchTerm: searchTerm,\n      page: pageNum,\n      filter: filterOption,\n      searchResults: searchResults,\n      itemNum: itemNum\n    });\n  };\n\n  const getData = async (searchTerm, pageNum, filterOption) => {\n    try {\n      getItems(searchTerm, pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n    const searchTerm = qs.search;\n    const {\n      pathname: pagePath\n    } = location;\n\n    if (isMount.current) {\n      // mount\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      return;\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [location]);\n  const {\n    searchTerm,\n    searchResults,\n    itemNum\n  } = searchData;\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(SearchPresenter, {\n    searchTerm: searchTerm,\n    searchResults: searchResults,\n    itemNum: itemNum,\n    error: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default SearchContainer;","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Search/SearchContainer3.js"],"names":["React","useState","useEffect","useRef","useLocation","SearchPresenter","searchApi","Loader","getQueryStringObject","SearchContainer","location","searchData","setSearchData","searchTerm","page","filter","searchResults","itemNum","error","setError","loading","setLoading","getItems","pageNum","filterOption","data","results","count","search","getData","isMount","qs","pathname","pagePath","current"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,SAAT,QAA0B,KAA1B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,oBAAP,MAAiC,iCAAjC;;AAEA,MAAMC,eAAe,GAAG,MAAM;AAC5B,QAAMC,QAAQ,GAAGN,WAAW,EAA5B;AACA,QAAM,CAACO,UAAD,EAAaC,aAAb,IAA8BX,QAAQ,CAAC;AAC3CY,IAAAA,UAAU,EAAE,IAD+B;AAE3CC,IAAAA,IAAI,EAAE,IAFqC;AAG3CC,IAAAA,MAAM,EAAE,IAHmC;AAI3CC,IAAAA,aAAa,EAAE,EAJ4B;AAK3CC,IAAAA,OAAO,EAAE;AALkC,GAAD,CAA5C;AAOA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBlB,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACmB,OAAD,EAAUC,UAAV,IAAwBpB,QAAQ,CAAC,IAAD,CAAtC;;AAEA,QAAMqB,QAAQ,GAAG,OAAOT,UAAP,EAAmBU,OAAnB,EAA4BC,YAA5B,KAA6C;AAC5D,QAAI;AACFC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,OAAO,EAAEV,aAAX;AAA0BW,QAAAA,KAAK,EAAEV;AAAjC;AADJ,QAEA,MAAMX,SAAS,CAACsB,MAAV,CAAiBf,UAAjB,EAA6BU,OAA7B,EAAsCC,YAAtC,CAFV;AAGAZ,IAAAA,aAAa,CAAC;AACZC,MAAAA,UAAU,EAAEA,UADA;AAEZC,MAAAA,IAAI,EAAES,OAFM;AAGZR,MAAAA,MAAM,EAAES,YAHI;AAIZR,MAAAA,aAAa,EAAEA,aAJH;AAKZC,MAAAA,OAAO,EAAEA;AALG,KAAD,CAAb;AAOD,GAXD;;AAaA,QAAMY,OAAO,GAAG,OAAOhB,UAAP,EAAmBU,OAAnB,EAA4BC,YAA5B,KAA6C;AAC3D,QAAI;AACFF,MAAAA,QAAQ,CAACT,UAAD,EAAaU,OAAb,EAAsBC,YAAtB,CAAR;AACD,KAFD,CAEE,MAAM;AACNL,MAAAA,QAAQ,CAAC,sBAAD,CAAR;AACD,KAJD,SAIU;AACRE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,GARD;;AAUA,QAAMS,OAAO,GAAG3B,MAAM,CAAC,IAAD,CAAtB;AAEAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM6B,EAAE,GAAGvB,oBAAoB,EAA/B;AACA,UAAMe,OAAO,GAAGQ,EAAE,CAACjB,IAAnB;AACA,UAAMU,YAAY,GAAGO,EAAE,CAAChB,MAAxB;AACA,UAAMF,UAAU,GAAGkB,EAAE,CAACH,MAAtB;AACA,UAAM;AAAEI,MAAAA,QAAQ,EAAEC;AAAZ,QAAyBvB,QAA/B;;AACA,QAAIoB,OAAO,CAACI,OAAZ,EAAqB;AACnB;AACAL,MAAAA,OAAO,CAAChB,UAAD,EAAaU,OAAb,EAAsBC,YAAtB,EAAoCS,QAApC,CAAP;AACAH,MAAAA,OAAO,CAACI,OAAR,GAAkB,KAAlB;AACA;AACD,KALD,MAKO;AACL;AACAL,MAAAA,OAAO,CAAChB,UAAD,EAAaU,OAAb,EAAsBC,YAAtB,EAAoCS,QAApC,CAAP;AACA;AACD,KAfa,CAgBd;;AACD,GAjBQ,EAiBN,CAACvB,QAAD,CAjBM,CAAT;AAmBA,QAAM;AAAEG,IAAAA,UAAF;AAAcG,IAAAA,aAAd;AAA6BC,IAAAA;AAA7B,MAAyCN,UAA/C;AAEA,SAAOS,OAAO,gBACZ,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADY,gBAGZ,oBAAC,eAAD;AACE,IAAA,UAAU,EAAEP,UADd;AAEE,IAAA,aAAa,EAAEG,aAFjB;AAGE,IAAA,OAAO,EAAEC,OAHX;AAIE,IAAA,KAAK,EAAEC,KAJT;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF;AAUD,CApED;;AAsEA,eAAeT,eAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport SearchPresenter from './SearchPresenter';\nimport { searchApi } from 'api';\nimport Loader from 'Components/Loader';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst SearchContainer = () => {\n  const location = useLocation();\n  const [searchData, setSearchData] = useState({\n    searchTerm: null,\n    page: null,\n    filter: null,\n    searchResults: [],\n    itemNum: null,\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  const getItems = async (searchTerm, pageNum, filterOption) => {\n    var {\n      data: { results: searchResults, count: itemNum },\n    } = await searchApi.search(searchTerm, pageNum, filterOption);\n    setSearchData({\n      searchTerm: searchTerm,\n      page: pageNum,\n      filter: filterOption,\n      searchResults: searchResults,\n      itemNum: itemNum,\n    });\n  };\n\n  const getData = async (searchTerm, pageNum, filterOption) => {\n    try {\n      getItems(searchTerm, pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n    const searchTerm = qs.search;\n    const { pathname: pagePath } = location;\n    if (isMount.current) {\n      // mount\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(searchTerm, pageNum, filterOption, pagePath);\n      return;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location]);\n\n  const { searchTerm, searchResults, itemNum } = searchData;\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <SearchPresenter\n      searchTerm={searchTerm}\n      searchResults={searchResults}\n      itemNum={itemNum}\n      error={error}\n    />\n  );\n};\n\nexport default SearchContainer;\n"]},"metadata":{},"sourceType":"module"}