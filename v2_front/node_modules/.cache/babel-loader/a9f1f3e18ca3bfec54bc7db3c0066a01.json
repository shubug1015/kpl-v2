{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Components/NaverLogIn.js\";\nimport React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport NaverLogin from \"react-naver-login\";\nimport { usersApi } from \"api\";\nimport { connect } from \"react-redux\";\nimport store, { logIn } from \"store\";\nconst Container = styled.div`\n  display: flex;\n  flex-flow: column wrap;\n`;\nconst NaverBtn = styled.div`\n  padding: 0;\n  width: 250px;\n  height: 40px;\n  line-height: 40px;\n  color: white;\n  background-color: #65c33d;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  font-size: 12px;\n  font-weight: bold;\n  text-align: center;\n  cursor: pointer;\n  &:focus {\n    outline: none;\n  }\n`;\n\nclass NaverLogIn extends Component {\n  constructor(props) {\n    super(props);\n\n    this.responseNaver = async res => {\n      try {\n        if (res.nickname !== undefined) {\n          this.setState({\n            id: res.id,\n            nickname: res.nickname,\n            email: res.email,\n            provider: \"naver\"\n          }, async () => {\n            const {\n              data: {\n                token\n              },\n              data: {\n                user_pk\n              }\n            } = await usersApi.naverLogin(this.state.nickname, this.state.email);\n            this.props.redux_saveLogInfo({\n              token,\n              user_pk,\n              logged: true\n            });\n          });\n        } else {\n          this.setState({\n            id: res.id,\n            name: res.name,\n            email: res.email,\n            provider: \"naver\"\n          }, async () => {\n            const {\n              data: {\n                token\n              },\n              data: {\n                user_pk\n              }\n            } = await usersApi.naverLogin(this.state.name, this.state.email);\n            this.props.redux_saveLogInfo({\n              token,\n              user_pk,\n              logged: true\n            });\n          });\n        }\n      } catch {\n        this.setState({\n          error: \"Can't find user\"\n        });\n      } finally {\n        this.setState({\n          loading: false\n        });\n      }\n\n      store.subscribe(() => {\n        sessionStorage.setItem(\"LogInInfo\", JSON.stringify(store.getState().user));\n        this.props.history.goBack();\n      });\n    };\n\n    this.responseFail = err => {\n      console.log(err);\n    };\n\n    this.state = {\n      id: \"\",\n      name: \"\",\n      nickname: \"\",\n      email: \"\",\n      provider: \"\",\n      logged: false,\n      error: null,\n      loading: true\n    };\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(Container, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(NaverBtn, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(NaverLogin, {\n      clientId: \"nG4Eq4uL7iBISNr7r5Um\",\n      callbackUrl: \"http://127.0.0.1:3000/login\",\n      render: props => /*#__PURE__*/React.createElement(\"div\", {\n        onClick: props.onClick,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 32\n        }\n      }, \"\\uB124\\uC774\\uBC84 \\uB85C\\uADF8\\uC778\"),\n      onSuccess: this.responseNaver,\n      onFailure: this.responseFail,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 11\n      }\n    })));\n  }\n\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    redux_saveLogInfo: data => dispatch(logIn(data))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(NaverLogIn);","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Components/NaverLogIn.js"],"names":["React","Component","styled","NaverLogin","usersApi","connect","store","logIn","Container","div","NaverBtn","NaverLogIn","constructor","props","responseNaver","res","nickname","undefined","setState","id","email","provider","data","token","user_pk","naverLogin","state","redux_saveLogInfo","logged","name","error","loading","subscribe","sessionStorage","setItem","JSON","stringify","getState","user","history","goBack","responseFail","err","console","log","render","onClick","mapDispatchToProps","dispatch","ownProps"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport styled from \"styled-components\";\nimport NaverLogin from \"react-naver-login\";\nimport { usersApi } from \"api\";\nimport { connect } from \"react-redux\";\nimport store, { logIn } from \"store\";\n\nconst Container = styled.div`\n  display: flex;\n  flex-flow: column wrap;\n`;\n\nconst NaverBtn = styled.div`\n  padding: 0;\n  width: 250px;\n  height: 40px;\n  line-height: 40px;\n  color: white;\n  background-color: #65c33d;\n  border: 1px solid transparent;\n  border-radius: 3px;\n  font-size: 12px;\n  font-weight: bold;\n  text-align: center;\n  cursor: pointer;\n  &:focus {\n    outline: none;\n  }\n`;\n\nclass NaverLogIn extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      id: \"\",\n      name: \"\",\n      nickname: \"\",\n      email: \"\",\n      provider: \"\",\n      logged: false,\n      error: null,\n      loading: true,\n    };\n  }\n  responseNaver = async (res) => {\n    try {\n      if (res.nickname !== undefined) {\n        this.setState(\n          {\n            id: res.id,\n            nickname: res.nickname,\n            email: res.email,\n            provider: \"naver\",\n          },\n          async () => {\n            const {\n              data: { token },\n              data: { user_pk },\n            } = await usersApi.naverLogin(\n              this.state.nickname,\n              this.state.email\n            );\n            this.props.redux_saveLogInfo({ token, user_pk, logged: true });\n          }\n        );\n      } else {\n        this.setState(\n          {\n            id: res.id,\n            name: res.name,\n            email: res.email,\n            provider: \"naver\",\n          },\n          async () => {\n            const {\n              data: { token },\n              data: { user_pk },\n            } = await usersApi.naverLogin(this.state.name, this.state.email);\n            this.props.redux_saveLogInfo({ token, user_pk, logged: true });\n          }\n        );\n      }\n    } catch {\n      this.setState({\n        error: \"Can't find user\",\n      });\n    } finally {\n      this.setState({ loading: false });\n    }\n    store.subscribe(() => {\n      sessionStorage.setItem(\n        \"LogInInfo\",\n        JSON.stringify(store.getState().user)\n      );\n      this.props.history.goBack();\n    });\n  };\n\n  responseFail = (err) => {\n    console.log(err);\n  };\n\n  render() {\n    return (\n      <Container>\n        <NaverBtn>\n          <NaverLogin\n            clientId=\"nG4Eq4uL7iBISNr7r5Um\"\n            callbackUrl=\"http://127.0.0.1:3000/login\"\n            render={(props) => <div onClick={props.onClick}>네이버 로그인</div>}\n            onSuccess={this.responseNaver}\n            onFailure={this.responseFail}\n          />\n        </NaverBtn>\n      </Container>\n    );\n  }\n}\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    redux_saveLogInfo: (data) => dispatch(logIn(data)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(NaverLogIn);\n"]},"metadata":{},"sourceType":"module"}