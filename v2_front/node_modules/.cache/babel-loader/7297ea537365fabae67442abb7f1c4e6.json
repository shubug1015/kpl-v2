{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/LogIn.js\";\nimport React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { usersApi } from 'api';\nimport store, { logIn } from 'store';\nimport KakaoLogIn from 'Components/KakaoLogIn';\nimport NaverLogIn from 'Components/NaverLogIn';\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n`;\nconst LogInBox = styled.div`\n  border: ${props => props.theme.mainBorder};\n  border-radius: 4px;\n  margin: 50px;\n  background-color: ${props => props.theme.whiteColor};\n  width: 400px;\n  height: 500px;\n`;\nconst LogInForm = styled.form``;\nconst Box = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 15px;\n  font-size: 12px;\n  :last-child {\n    margin-top: 20px;\n    &:hover {\n      text-decoration: none;\n      color: black;\n      opacity: 0.7;\n    }\n  }\n`;\nconst Title = styled.span`\n  font-size: 20px;\n`;\nconst IdInputBox = styled.input`\n  border: ${props => props.theme.mainBorder};\n  border-radius: 4px;\n  padding-left: 10px;\n  width: 250px;\n  height: 40px;\n  outline: none;\n`;\nconst AlertText = styled.div`\n  display: flex;\n  justify-content: center;\n  height: 15px;\n  color: red;\n  font-size: 11px;\n  margin-top: 15px;\n`;\nconst SaveLogged = styled.div`\n  display: flex;\n  align-items: center;\n`;\nconst SaveLoggedCheck = styled.input`\n  margin-right: 10px;\n`;\nconst SubmitBtn = styled.input`\n  border: none;\n  border-radius: 4px;\n  background-color: ${props => props.theme.pinkColor};\n  margin-bottom: 20px;\n  width: 250px;\n  height: 40px;\n  outline: none;\n`;\nconst SnsLogIn = styled.div`\n  border-top: ${props => props.theme.mainBorder};\n  padding-top: 10px;\n`;\nconst ToSignUp = styled.div``;\nconst SLink = styled(Link)`\n  &:hover {\n    text-decoration: none;\n    color: black;\n    opacity: 0.7;\n  }\n`; // const Logged = store.getState()?.user.logged;\n\nconst LogIn = ({\n  redux_saveLogInfo\n}) => {\n  const [id, setId] = useState('');\n  const [pw, setPw] = useState('');\n  const [logged, setLogged] = useState(false);\n  const [token, setToken] = useState('');\n  const [user_pk, setUserPk] = useState('');\n  const [localLogged, setLocalLogged] = useState(false);\n\n  const saveLocal = () => {\n    setLocalLogged(!localLogged);\n  };\n\n  const LOGIN_INFO = 'LogInInfo';\n\n  function handleId(event) {\n    const {\n      target: {\n        value\n      }\n    } = event;\n    setId(value);\n  }\n\n  function handlePw(event) {\n    const {\n      target: {\n        value\n      }\n    } = event;\n    setPw(value);\n  }\n\n  const history = useHistory();\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    store.subscribe(() => {\n      var _store$getState, _store$getState2, _store$getState3;\n\n      if (((_store$getState = store.getState()) === null || _store$getState === void 0 ? void 0 : _store$getState.user.logged) && ((_store$getState2 = store.getState()) === null || _store$getState2 === void 0 ? void 0 : _store$getState2.location[((_store$getState3 = store.getState()) === null || _store$getState3 === void 0 ? void 0 : _store$getState3.location.length) - 1].location) === '/login') {\n        if (localLogged === true) {\n          localStorage.setItem(LOGIN_INFO, JSON.stringify(store.getState().user));\n        } else {\n          sessionStorage.setItem(LOGIN_INFO, JSON.stringify(store.getState().user));\n        }\n\n        console.log('go back');\n        history.goBack();\n      }\n    });\n\n    try {\n      const {\n        data: {\n          token\n        },\n        data: {\n          user_pk\n        }\n      } = await usersApi.login(id, pw);\n      setToken(token); //state\n\n      setUserPk(user_pk);\n      setLogged(true); //state\n    } catch {\n      setLogged('logInError');\n    }\n  }\n\n  useEffect(() => {\n    console.log('1');\n\n    if (logged) {\n      console.log('2');\n      redux_saveLogInfo({\n        token,\n        user_pk,\n        logged\n      }); //redux\n    }\n\n    return () => {\n      console.log('unmount');\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [logged]);\n  return /*#__PURE__*/React.createElement(Container, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 179,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(LogInBox, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(LogInForm, {\n    onSubmit: handleSubmit,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 13\n    }\n  }, \"Log In\")), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IdInputBox, {\n    onChange: handleId,\n    type: \"text\",\n    placeholder: \"\\uC544\\uC774\\uB514\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(IdInputBox, {\n    onChange: handlePw,\n    type: \"password\",\n    placeholder: \"\\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uC785\\uB825\\uD558\\uC138\\uC694.\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  })), logged !== 'logInError' ? '' : /*#__PURE__*/React.createElement(AlertText, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, \"* \\uC544\\uC774\\uB514 \\uB610\\uB294 \\uBE44\\uBC00\\uBC88\\uD638\\uB97C \\uD655\\uC778\\uD574 \\uC8FC\\uC138\\uC694\"), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SaveLogged, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(SaveLoggedCheck, {\n    type: \"checkbox\",\n    onClick: saveLocal,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 15\n    }\n  }), \"\\uB85C\\uADF8\\uC778\\uC0C1\\uD0DC \\uC720\\uC9C0\\uD558\\uAE30\")), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SubmitBtn, {\n    type: \"submit\",\n    value: \"\\uB85C\\uADF8\\uC778\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }))), /*#__PURE__*/React.createElement(SnsLogIn, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(KakaoLogIn, {\n    history: history,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 216,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(NaverLogIn, {\n    history: history,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 13\n    }\n  })), /*#__PURE__*/React.createElement(Box, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(SLink, {\n    to: \"/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(ToSignUp, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 15\n    }\n  }, \"\\uD68C\\uC6D0\\uAC00\\uC785 >\"))))));\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    redux_saveLogInfo: data => dispatch(logIn(data))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(LogIn);","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/LogIn.js"],"names":["React","useState","useEffect","Link","useHistory","connect","styled","usersApi","store","logIn","KakaoLogIn","NaverLogIn","Container","div","LogInBox","props","theme","mainBorder","whiteColor","LogInForm","form","Box","Title","span","IdInputBox","input","AlertText","SaveLogged","SaveLoggedCheck","SubmitBtn","pinkColor","SnsLogIn","ToSignUp","SLink","LogIn","redux_saveLogInfo","id","setId","pw","setPw","logged","setLogged","token","setToken","user_pk","setUserPk","localLogged","setLocalLogged","saveLocal","LOGIN_INFO","handleId","event","target","value","handlePw","history","handleSubmit","preventDefault","subscribe","getState","user","location","length","localStorage","setItem","JSON","stringify","sessionStorage","console","log","goBack","data","login","mapDispatchToProps","dispatch","ownProps"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link, useHistory } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport styled from 'styled-components';\nimport { usersApi } from 'api';\nimport store, { logIn } from 'store';\nimport KakaoLogIn from 'Components/KakaoLogIn';\nimport NaverLogIn from 'Components/NaverLogIn';\n\nconst Container = styled.div`\n  display: flex;\n  justify-content: center;\n`;\n\nconst LogInBox = styled.div`\n  border: ${(props) => props.theme.mainBorder};\n  border-radius: 4px;\n  margin: 50px;\n  background-color: ${(props) => props.theme.whiteColor};\n  width: 400px;\n  height: 500px;\n`;\n\nconst LogInForm = styled.form``;\n\nconst Box = styled.div`\n  display: flex;\n  justify-content: center;\n  padding-top: 15px;\n  font-size: 12px;\n  :last-child {\n    margin-top: 20px;\n    &:hover {\n      text-decoration: none;\n      color: black;\n      opacity: 0.7;\n    }\n  }\n`;\n\nconst Title = styled.span`\n  font-size: 20px;\n`;\n\nconst IdInputBox = styled.input`\n  border: ${(props) => props.theme.mainBorder};\n  border-radius: 4px;\n  padding-left: 10px;\n  width: 250px;\n  height: 40px;\n  outline: none;\n`;\n\nconst AlertText = styled.div`\n  display: flex;\n  justify-content: center;\n  height: 15px;\n  color: red;\n  font-size: 11px;\n  margin-top: 15px;\n`;\n\nconst SaveLogged = styled.div`\n  display: flex;\n  align-items: center;\n`;\n\nconst SaveLoggedCheck = styled.input`\n  margin-right: 10px;\n`;\n\nconst SubmitBtn = styled.input`\n  border: none;\n  border-radius: 4px;\n  background-color: ${(props) => props.theme.pinkColor};\n  margin-bottom: 20px;\n  width: 250px;\n  height: 40px;\n  outline: none;\n`;\n\nconst SnsLogIn = styled.div`\n  border-top: ${(props) => props.theme.mainBorder};\n  padding-top: 10px;\n`;\n\nconst ToSignUp = styled.div``;\n\nconst SLink = styled(Link)`\n  &:hover {\n    text-decoration: none;\n    color: black;\n    opacity: 0.7;\n  }\n`;\n\n// const Logged = store.getState()?.user.logged;\n\nconst LogIn = ({ redux_saveLogInfo }) => {\n  const [id, setId] = useState('');\n  const [pw, setPw] = useState('');\n  const [logged, setLogged] = useState(false);\n  const [token, setToken] = useState('');\n  const [user_pk, setUserPk] = useState('');\n\n  const [localLogged, setLocalLogged] = useState(false);\n\n  const saveLocal = () => {\n    setLocalLogged(!localLogged);\n  };\n\n  const LOGIN_INFO = 'LogInInfo';\n\n  function handleId(event) {\n    const {\n      target: { value },\n    } = event;\n    setId(value);\n  }\n\n  function handlePw(event) {\n    const {\n      target: { value },\n    } = event;\n    setPw(value);\n  }\n\n  const history = useHistory();\n\n  async function handleSubmit(event) {\n    event.preventDefault();\n    store.subscribe(() => {\n      if (\n        store.getState()?.user.logged &&\n        store.getState()?.location[store.getState()?.location.length - 1]\n          .location === '/login'\n      ) {\n        if (localLogged === true) {\n          localStorage.setItem(\n            LOGIN_INFO,\n            JSON.stringify(store.getState().user)\n          );\n        } else {\n          sessionStorage.setItem(\n            LOGIN_INFO,\n            JSON.stringify(store.getState().user)\n          );\n        }\n        console.log('go back');\n        history.goBack();\n      }\n    });\n    try {\n      const {\n        data: { token },\n        data: { user_pk },\n      } = await usersApi.login(id, pw);\n      setToken(token); //state\n      setUserPk(user_pk);\n      setLogged(true); //state\n    } catch {\n      setLogged('logInError');\n    }\n  }\n\n  useEffect(() => {\n    console.log('1');\n    if (logged) {\n      console.log('2');\n      redux_saveLogInfo({ token, user_pk, logged }); //redux\n    }\n    return () => {\n      console.log('unmount');\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [logged]);\n\n  return (\n    <Container>\n      <LogInBox>\n        <LogInForm onSubmit={handleSubmit}>\n          <Box>\n            <Title>Log In</Title>\n          </Box>\n          <Box>\n            <IdInputBox\n              onChange={handleId}\n              type='text'\n              placeholder='아이디를 입력하세요.'\n            />\n          </Box>\n          <Box>\n            <IdInputBox\n              onChange={handlePw}\n              type='password'\n              placeholder='비밀번호를 입력하세요.'\n            />\n          </Box>\n          {logged !== 'logInError' ? (\n            ''\n          ) : (\n            <AlertText>* 아이디 또는 비밀번호를 확인해 주세요</AlertText>\n          )}\n          <Box>\n            <SaveLogged>\n              <SaveLoggedCheck type='checkbox' onClick={saveLocal} />\n              로그인상태 유지하기\n            </SaveLogged>\n          </Box>\n          <Box>\n            <SubmitBtn type='submit' value='로그인' />\n          </Box>\n        </LogInForm>\n        <SnsLogIn>\n          <Box>\n            <KakaoLogIn history={history} />\n          </Box>\n          <Box>\n            <NaverLogIn history={history} />\n          </Box>\n          <Box>\n            <SLink to='/signup'>\n              <ToSignUp>회원가입 ></ToSignUp>\n            </SLink>\n          </Box>\n        </SnsLogIn>\n      </LogInBox>\n    </Container>\n  );\n};\n\nconst mapDispatchToProps = (dispatch, ownProps) => {\n  return {\n    redux_saveLogInfo: (data) => dispatch(logIn(data)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(LogIn);\n"]},"metadata":{},"sourceType":"module"}