{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/PageFrame/PageFrameContainer3.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PageFramePresenter from './PageFramePresenter';\nimport Loader from 'Components/Loader';\nimport { productsApi } from 'api';\nimport { pageNum, filterOption } from 'store';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst PageFrameContainer = ({\n  redux_getPageNum,\n  redux_getFilterOption\n}) => {\n  const [pageFrameData, setPageFrameData] = useState({\n    items: null,\n    itemNum: null\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const location = useLocation();\n  const url = 'http://localhost:3000' + location.pathname + location.search;\n\n  const getItems = async (pageNum, filterOption) => {\n    var {\n      data: {\n        count: itemNum,\n        results: item\n      }\n    } = await productsApi.apiProducts(pageNum, filterOption);\n\n    if (items !== item) {\n      setPageFrameData({\n        items: item,\n        itemNum: itemNum\n      });\n    }\n  };\n\n  const getData = (pageNum, filterOption) => {\n    try {\n      getItems(pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n\n    if (isMount.current) {\n      // mount\n      getData(pageNum, filterOption);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(pageNum, filterOption);\n      return;\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [location]);\n  const {\n    items,\n    itemNum\n  } = pageFrameData;\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(PageFramePresenter, {\n    items: items,\n    itemNum: itemNum,\n    error: error,\n    url: url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 5\n    }\n  });\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    redux_getPageNum: data => dispatch(pageNum(data)),\n    redux_getFilterOption: data => dispatch(filterOption(data))\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(PageFrameContainer);","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/PageFrame/PageFrameContainer3.js"],"names":["React","useState","useEffect","useRef","useLocation","connect","PageFramePresenter","Loader","productsApi","pageNum","filterOption","getQueryStringObject","PageFrameContainer","redux_getPageNum","redux_getFilterOption","pageFrameData","setPageFrameData","items","itemNum","error","setError","loading","setLoading","location","url","pathname","search","getItems","data","count","results","item","apiProducts","getData","isMount","qs","page","filter","current","mapDispatchToProps","dispatch"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport { connect } from 'react-redux';\nimport PageFramePresenter from './PageFramePresenter';\nimport Loader from 'Components/Loader';\nimport { productsApi } from 'api';\nimport { pageNum, filterOption } from 'store';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst PageFrameContainer = ({ redux_getPageNum, redux_getFilterOption }) => {\n  const [pageFrameData, setPageFrameData] = useState({\n    items: null,\n    itemNum: null,\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const location = useLocation();\n  const url = 'http://localhost:3000' + location.pathname + location.search;\n\n  const getItems = async (pageNum, filterOption) => {\n    var {\n      data: { count: itemNum, results: item },\n    } = await productsApi.apiProducts(pageNum, filterOption);\n    if (items !== item) {\n      setPageFrameData({\n        items: item,\n        itemNum: itemNum,\n      });\n    }\n  };\n\n  const getData = (pageNum, filterOption) => {\n    try {\n      getItems(pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n    if (isMount.current) {\n      // mount\n      getData(pageNum, filterOption);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(pageNum, filterOption);\n      return;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location]);\n\n  const { items, itemNum } = pageFrameData;\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <PageFramePresenter\n      items={items}\n      itemNum={itemNum}\n      error={error}\n      url={url}\n    />\n  );\n};\n\nconst mapDispatchToProps = (dispatch) => {\n  return {\n    redux_getPageNum: (data) => dispatch(pageNum(data)),\n    redux_getFilterOption: (data) => dispatch(filterOption(data)),\n  };\n};\n\nexport default connect(null, mapDispatchToProps)(PageFrameContainer);\n"]},"metadata":{},"sourceType":"module"}