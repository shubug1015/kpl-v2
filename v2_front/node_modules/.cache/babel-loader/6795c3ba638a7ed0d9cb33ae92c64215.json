{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Detail/DetailContainer.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DetailPresenter from './DetailPresenter';\nimport { productsApi, usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst DetailContainer = () => {\n  const [detailData, setDetailData] = useState({\n    detail: '',\n    productImg: '',\n    checkFavs: '',\n    recent: [],\n    reviews: [],\n    qnas: []\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const {\n    id: productId\n  } = useParams();\n\n  const getProductData = async () => {\n    var _store$getState;\n\n    const {\n      data: detail\n    } = await productsApi.showDetail(productId);\n    const {\n      data: checkFavs\n    } = await usersApi.checkfavs(detail.id);\n    const {\n      data: {\n        results: reviews\n      }\n    } = await productsApi.reviews(productId);\n    const {\n      data: {\n        results: qnas\n      }\n    } = await productsApi.qnas(productId);\n    const recent = (_store$getState = store.getState()) === null || _store$getState === void 0 ? void 0 : _store$getState.products.map(i => i.product);\n    return [detail, checkFavs, reviews, qnas, recent];\n  };\n\n  const getData = async () => {\n    try {\n      var _store$getState2;\n\n      const [detail, checkFavs, reviews, qnas, recent] = await getProductData();\n\n      if ((_store$getState2 = store.getState()) === null || _store$getState2 === void 0 ? void 0 : _store$getState2.user.logged) {\n        setDetailData({\n          detail: detail,\n          checkFavs: checkFavs,\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas\n        });\n      } else {\n        setDetailData({\n          detail: detail,\n          checkFavs: checkFavs,\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas\n        });\n      }\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productId]);\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(DetailPresenter, Object.assign({}, detailData, {\n    error: error,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }));\n};\n\nexport default DetailContainer;","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Detail/DetailContainer.js"],"names":["React","useState","useEffect","useParams","DetailPresenter","productsApi","usersApi","Loader","store","DetailContainer","detailData","setDetailData","detail","productImg","checkFavs","recent","reviews","qnas","error","setError","loading","setLoading","id","productId","getProductData","data","showDetail","checkfavs","results","getState","products","map","i","product","getData","user","logged"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport DetailPresenter from './DetailPresenter';\nimport { productsApi, usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst DetailContainer = () => {\n  const [detailData, setDetailData] = useState({\n    detail: '',\n    productImg: '',\n    checkFavs: '',\n    recent: [],\n    reviews: [],\n    qnas: [],\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const { id: productId } = useParams();\n\n  const getProductData = async () => {\n    const { data: detail } = await productsApi.showDetail(productId);\n    const { data: checkFavs } = await usersApi.checkfavs(detail.id);\n    const {\n      data: { results: reviews },\n    } = await productsApi.reviews(productId);\n    const {\n      data: { results: qnas },\n    } = await productsApi.qnas(productId);\n    const recent = store.getState()?.products.map((i) => i.product);\n    return [detail, checkFavs, reviews, qnas, recent];\n  };\n\n  const getData = async () => {\n    try {\n      const [detail, checkFavs, reviews, qnas, recent] = await getProductData();\n      if (store.getState()?.user.logged) {\n        setDetailData({\n          detail: detail,\n          checkFavs: checkFavs,\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas,\n        });\n      } else {\n        setDetailData({\n          detail: detail,\n          checkFavs: checkFavs,\n          recent: recent,\n          reviews: reviews,\n          qnas: qnas,\n        });\n      }\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [productId]);\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <DetailPresenter {...detailData} error={error} />\n  );\n};\n\nexport default DetailContainer;\n"]},"metadata":{},"sourceType":"module"}