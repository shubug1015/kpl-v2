{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Basket/BasketContainer.js\";\nimport React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport BasketPresenter from './BasketPresenter';\nimport { usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst BasketContainer = () => {\n  const [basketData, setBasketData] = useState({\n    user: null,\n    basket: null,\n    basketObjectId: false,\n    error: null\n  });\n  const [loading, setLoading] = useState(true);\n  const basketObjectId_props = useLocation().state;\n\n  const getItems = async () => {\n    var _store$getState$user;\n\n    const {\n      data: user\n    } = await usersApi.user();\n    const {\n      data: {\n        results\n      }\n    } = await usersApi.basket((_store$getState$user = store.getState().user) === null || _store$getState$user === void 0 ? void 0 : _store$getState$user.token);\n    const basket = results.map(basket => {\n      basket.product.option = basket.option;\n      basket.product.qty = basket.qty;\n      basket.product.productId = basket.product.id;\n      basket.product.id = basket.id;\n      return basket.product;\n    });\n    setBasketData({\n      user: user,\n      basket: basket,\n      basketObjectId: false\n    });\n\n    if (basketObjectId_props !== undefined) {\n      setBasketData({\n        user: user,\n        basket: basket,\n        basketObjectId: basketObjectId_props.basketObjectId\n      });\n    }\n  };\n\n  const getData = async () => {\n    try {\n      await getItems();\n    } catch {\n      setBasketData({ ...basketData,\n        error: 'Error'\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 20\n    }\n  }) : /*#__PURE__*/React.createElement(BasketPresenter, Object.assign({}, basketData, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 33\n    }\n  }));\n};\n\nexport default BasketContainer;","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/Basket/BasketContainer.js"],"names":["React","useState","useEffect","useLocation","BasketPresenter","usersApi","Loader","store","BasketContainer","basketData","setBasketData","user","basket","basketObjectId","error","loading","setLoading","basketObjectId_props","state","getItems","data","results","getState","token","map","product","option","qty","productId","id","undefined","getData"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,eAAP,MAA4B,mBAA5B;AACA,SAASC,QAAT,QAAyB,KAAzB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,eAAe,GAAG,MAAM;AAC5B,QAAM,CAACC,UAAD,EAAaC,aAAb,IAA8BT,QAAQ,CAAC;AAC3CU,IAAAA,IAAI,EAAE,IADqC;AAE3CC,IAAAA,MAAM,EAAE,IAFmC;AAG3CC,IAAAA,cAAc,EAAE,KAH2B;AAI3CC,IAAAA,KAAK,EAAE;AAJoC,GAAD,CAA5C;AAMA,QAAM,CAACC,OAAD,EAAUC,UAAV,IAAwBf,QAAQ,CAAC,IAAD,CAAtC;AAEA,QAAMgB,oBAAoB,GAAGd,WAAW,GAAGe,KAA3C;;AAEA,QAAMC,QAAQ,GAAG,YAAY;AAAA;;AAC3B,UAAM;AAAEC,MAAAA,IAAI,EAAET;AAAR,QAAiB,MAAMN,QAAQ,CAACM,IAAT,EAA7B;AACA,UAAM;AACJS,MAAAA,IAAI,EAAE;AAAEC,QAAAA;AAAF;AADF,QAEF,MAAMhB,QAAQ,CAACO,MAAT,yBAAgBL,KAAK,CAACe,QAAN,GAAiBX,IAAjC,yDAAgB,qBAAuBY,KAAvC,CAFV;AAGA,UAAMX,MAAM,GAAGS,OAAO,CAACG,GAAR,CAAaZ,MAAD,IAAY;AACrCA,MAAAA,MAAM,CAACa,OAAP,CAAeC,MAAf,GAAwBd,MAAM,CAACc,MAA/B;AACAd,MAAAA,MAAM,CAACa,OAAP,CAAeE,GAAf,GAAqBf,MAAM,CAACe,GAA5B;AACAf,MAAAA,MAAM,CAACa,OAAP,CAAeG,SAAf,GAA2BhB,MAAM,CAACa,OAAP,CAAeI,EAA1C;AACAjB,MAAAA,MAAM,CAACa,OAAP,CAAeI,EAAf,GAAoBjB,MAAM,CAACiB,EAA3B;AACA,aAAOjB,MAAM,CAACa,OAAd;AACD,KANc,CAAf;AAOAf,IAAAA,aAAa,CAAC;AACZC,MAAAA,IAAI,EAAEA,IADM;AAEZC,MAAAA,MAAM,EAAEA,MAFI;AAGZC,MAAAA,cAAc,EAAE;AAHJ,KAAD,CAAb;;AAKA,QAAII,oBAAoB,KAAKa,SAA7B,EAAwC;AACtCpB,MAAAA,aAAa,CAAC;AACZC,QAAAA,IAAI,EAAEA,IADM;AAEZC,QAAAA,MAAM,EAAEA,MAFI;AAGZC,QAAAA,cAAc,EAAEI,oBAAoB,CAACJ;AAHzB,OAAD,CAAb;AAKD;AACF,GAxBD;;AA0BA,QAAMkB,OAAO,GAAG,YAAY;AAC1B,QAAI;AACF,YAAMZ,QAAQ,EAAd;AACD,KAFD,CAEE,MAAM;AACNT,MAAAA,aAAa,CAAC,EACZ,GAAGD,UADS;AAEZK,QAAAA,KAAK,EAAE;AAFK,OAAD,CAAb;AAID,KAPD,SAOU;AACRE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,GAXD;;AAaAd,EAAAA,SAAS,CAAC,MAAM;AACd6B,IAAAA,OAAO,GADO,CAEd;AACD,GAHQ,EAGN,EAHM,CAAT;AAKA,SAAOhB,OAAO,gBAAG,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAAH,gBAAgB,oBAAC,eAAD,oBAAqBN,UAArB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA9B;AACD,CAxDD;;AA0DA,eAAeD,eAAf","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport BasketPresenter from './BasketPresenter';\nimport { usersApi } from 'api';\nimport Loader from 'Components/Loader';\nimport store from 'store';\n\nconst BasketContainer = () => {\n  const [basketData, setBasketData] = useState({\n    user: null,\n    basket: null,\n    basketObjectId: false,\n    error: null,\n  });\n  const [loading, setLoading] = useState(true);\n\n  const basketObjectId_props = useLocation().state;\n\n  const getItems = async () => {\n    const { data: user } = await usersApi.user();\n    const {\n      data: { results },\n    } = await usersApi.basket(store.getState().user?.token);\n    const basket = results.map((basket) => {\n      basket.product.option = basket.option;\n      basket.product.qty = basket.qty;\n      basket.product.productId = basket.product.id;\n      basket.product.id = basket.id;\n      return basket.product;\n    });\n    setBasketData({\n      user: user,\n      basket: basket,\n      basketObjectId: false,\n    });\n    if (basketObjectId_props !== undefined) {\n      setBasketData({\n        user: user,\n        basket: basket,\n        basketObjectId: basketObjectId_props.basketObjectId,\n      });\n    }\n  };\n\n  const getData = async () => {\n    try {\n      await getItems();\n    } catch {\n      setBasketData({\n        ...basketData,\n        error: 'Error',\n      });\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    getData();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return loading ? <Loader /> : <BasketPresenter {...basketData} />;\n};\n\nexport default BasketContainer;\n"]},"metadata":{},"sourceType":"module"}