{"ast":null,"code":"var _jsxFileName = \"/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/PageFrame/PageFrameContainer3.js\";\nimport React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport PageFramePresenter from './PageFramePresenter';\nimport Loader from 'Components/Loader';\nimport { productsApi } from 'api';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst PageFrameContainer = () => {\n  const [pageFrameData, setPageFrameData] = useState({\n    items: null,\n    itemNum: null\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const location = useLocation();\n  const url = 'http://localhost:3000' + location.pathname + location.search;\n\n  const getItems = async (pageNum, filterOption) => {\n    var {\n      data: {\n        count: itemNum,\n        results: item\n      }\n    } = await productsApi.apiProducts(pageNum, filterOption);\n\n    if (items !== item) {\n      setPageFrameData({\n        items: item,\n        itemNum: itemNum\n      });\n    }\n  };\n\n  const getData = (pageNum, filterOption) => {\n    try {\n      getItems(pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n\n    if (isMount.current) {\n      // mount\n      getData(pageNum, filterOption);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(pageNum, filterOption);\n      return;\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [location]);\n  const {\n    items,\n    itemNum\n  } = pageFrameData;\n  return loading ? /*#__PURE__*/React.createElement(Loader, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 5\n    }\n  }) : /*#__PURE__*/React.createElement(PageFramePresenter, {\n    items: items,\n    itemNum: itemNum,\n    error: error,\n    url: url,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 5\n    }\n  });\n};\n\nexport default PageFrameContainer;","map":{"version":3,"sources":["/Users/Donghyun/Desktop/KPL_V2/v2_front/src/Routes/PageFrame/PageFrameContainer3.js"],"names":["React","useState","useEffect","useRef","useLocation","PageFramePresenter","Loader","productsApi","getQueryStringObject","PageFrameContainer","pageFrameData","setPageFrameData","items","itemNum","error","setError","loading","setLoading","location","url","pathname","search","getItems","pageNum","filterOption","data","count","results","item","apiProducts","getData","isMount","qs","page","filter","current"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,EAAqCC,MAArC,QAAmD,OAAnD;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,OAAOC,kBAAP,MAA+B,sBAA/B;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,WAAT,QAA4B,KAA5B;AACA,OAAOC,oBAAP,MAAiC,iCAAjC;;AAEA,MAAMC,kBAAkB,GAAG,MAAM;AAC/B,QAAM,CAACC,aAAD,EAAgBC,gBAAhB,IAAoCV,QAAQ,CAAC;AACjDW,IAAAA,KAAK,EAAE,IAD0C;AAEjDC,IAAAA,OAAO,EAAE;AAFwC,GAAD,CAAlD;AAIA,QAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBd,QAAQ,CAAC,IAAD,CAAlC;AACA,QAAM,CAACe,OAAD,EAAUC,UAAV,IAAwBhB,QAAQ,CAAC,IAAD,CAAtC;AACA,QAAMiB,QAAQ,GAAGd,WAAW,EAA5B;AACA,QAAMe,GAAG,GAAG,0BAA0BD,QAAQ,CAACE,QAAnC,GAA8CF,QAAQ,CAACG,MAAnE;;AAEA,QAAMC,QAAQ,GAAG,OAAOC,OAAP,EAAgBC,YAAhB,KAAiC;AAChD,QAAI;AACFC,MAAAA,IAAI,EAAE;AAAEC,QAAAA,KAAK,EAAEb,OAAT;AAAkBc,QAAAA,OAAO,EAAEC;AAA3B;AADJ,QAEA,MAAMrB,WAAW,CAACsB,WAAZ,CAAwBN,OAAxB,EAAiCC,YAAjC,CAFV;;AAGA,QAAIZ,KAAK,KAAKgB,IAAd,EAAoB;AAClBjB,MAAAA,gBAAgB,CAAC;AACfC,QAAAA,KAAK,EAAEgB,IADQ;AAEff,QAAAA,OAAO,EAAEA;AAFM,OAAD,CAAhB;AAID;AACF,GAVD;;AAYA,QAAMiB,OAAO,GAAG,CAACP,OAAD,EAAUC,YAAV,KAA2B;AACzC,QAAI;AACFF,MAAAA,QAAQ,CAACC,OAAD,EAAUC,YAAV,CAAR;AACD,KAFD,CAEE,MAAM;AACNT,MAAAA,QAAQ,CAAC,sBAAD,CAAR;AACD,KAJD,SAIU;AACRE,MAAAA,UAAU,CAAC,KAAD,CAAV;AACD;AACF,GARD;;AAUA,QAAMc,OAAO,GAAG5B,MAAM,CAAC,IAAD,CAAtB;AACAD,EAAAA,SAAS,CAAC,MAAM;AACd,UAAM8B,EAAE,GAAGxB,oBAAoB,EAA/B;AACA,UAAMe,OAAO,GAAGS,EAAE,CAACC,IAAnB;AACA,UAAMT,YAAY,GAAGQ,EAAE,CAACE,MAAxB;;AACA,QAAIH,OAAO,CAACI,OAAZ,EAAqB;AACnB;AACAL,MAAAA,OAAO,CAACP,OAAD,EAAUC,YAAV,CAAP;AACAO,MAAAA,OAAO,CAACI,OAAR,GAAkB,KAAlB;AACA;AACD,KALD,MAKO;AACL;AACAL,MAAAA,OAAO,CAACP,OAAD,EAAUC,YAAV,CAAP;AACA;AACD,KAba,CAcd;;AACD,GAfQ,EAeN,CAACN,QAAD,CAfM,CAAT;AAiBA,QAAM;AAAEN,IAAAA,KAAF;AAASC,IAAAA;AAAT,MAAqBH,aAA3B;AAEA,SAAOM,OAAO,gBACZ,oBAAC,MAAD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IADY,gBAGZ,oBAAC,kBAAD;AACE,IAAA,KAAK,EAAEJ,KADT;AAEE,IAAA,OAAO,EAAEC,OAFX;AAGE,IAAA,KAAK,EAAEC,KAHT;AAIE,IAAA,GAAG,EAAEK,GAJP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAHF;AAUD,CA9DD;;AAgEA,eAAeV,kBAAf","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { useLocation } from 'react-router-dom';\nimport PageFramePresenter from './PageFramePresenter';\nimport Loader from 'Components/Loader';\nimport { productsApi } from 'api';\nimport getQueryStringObject from 'Components/getQueryStringObject';\n\nconst PageFrameContainer = () => {\n  const [pageFrameData, setPageFrameData] = useState({\n    items: null,\n    itemNum: null,\n  });\n  const [error, setError] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const location = useLocation();\n  const url = 'http://localhost:3000' + location.pathname + location.search;\n\n  const getItems = async (pageNum, filterOption) => {\n    var {\n      data: { count: itemNum, results: item },\n    } = await productsApi.apiProducts(pageNum, filterOption);\n    if (items !== item) {\n      setPageFrameData({\n        items: item,\n        itemNum: itemNum,\n      });\n    }\n  };\n\n  const getData = (pageNum, filterOption) => {\n    try {\n      getItems(pageNum, filterOption);\n    } catch {\n      setError(\"Can't find anything.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const isMount = useRef(true);\n  useEffect(() => {\n    const qs = getQueryStringObject();\n    const pageNum = qs.page;\n    const filterOption = qs.filter;\n    if (isMount.current) {\n      // mount\n      getData(pageNum, filterOption);\n      isMount.current = false;\n      return;\n    } else {\n      //update\n      getData(pageNum, filterOption);\n      return;\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [location]);\n\n  const { items, itemNum } = pageFrameData;\n\n  return loading ? (\n    <Loader />\n  ) : (\n    <PageFramePresenter\n      items={items}\n      itemNum={itemNum}\n      error={error}\n      url={url}\n    />\n  );\n};\n\nexport default PageFrameContainer;\n"]},"metadata":{},"sourceType":"module"}